# Product Backlog - PokÃ©mon TCG AI Generator

## ðŸ“Š RESUMEN DEL PROYECTO

**Total de Sprints:** 8  
**Historias Completadas:** 31  
**Historias en Progreso:** 0  
**Historias Pendientes:** 46  

---

## âœ… SPRINT 1 - DONE

### ConfiguraciÃ³n Base y APIs Externas
- [x] **ConfiguraciÃ³n de Django Users y Django REST Framework para AutenticaciÃ³n** - DONE
- [x] **ConfiguraciÃ³n Inicial de Confluence (o alternativa gratuita)** - DONE
- [x] **ImplementaciÃ³n del Servicio de Consulta a la API de PokÃ©mon TCG (Cartas por ExpansiÃ³n)** - DONE
- [x] **Endpoint Backend para Listar Expansiones** - DONE
- [x] **ImplementaciÃ³n del Servicio de Consulta a la API de PokÃ©mon TCG (Expansiones)** - DONE
- [x] **DiseÃ±o de la Base de Datos para Carta y ExpansiÃ³n** - DONE
- [x] **ConfiguraciÃ³n de Docker para el Backend Django** - DONE
- [x] **InicializaciÃ³n del Repositorio Git y ConexiÃ³n con GitHub** - DONE
- [x] **ConfiguraciÃ³n Inicial del Entorno de Desarrollo Python/Django** - DONE

---

## âœ… SPRINT 2 - DONE

### AutenticaciÃ³n y Frontend Base
- [x] **Acceso a Datos Protegidos de la ColecciÃ³n (Expansiones y Cartas)** - DONE
- [x] **Proteger Endpoints que Requieren AutenticaciÃ³n** - DONE
- [x] **Endpoint Backend para Obtener Detalles de una Carta EspecÃ­fica (por API ID)** - DONE
- [x] **Interfaz de Usuario (Frontend) para Login de Usuarios y GestiÃ³n de Tokens** - DONE
- [x] **Interfaz de Usuario (Frontend) para Registro de Usuarios** - DONE
- [x] **Endpoint Backend para Login de Usuarios y ObtenciÃ³n de Tokens** - DONE
- [x] **Endpoint Backend para Registro de Usuarios** - DONE
- [x] **ConfiguraciÃ³n de Pruebas Unitarias para el Backend (pytest)** - DONE
- [x] **Componente de SelecciÃ³n de Carta por ExpansiÃ³n** - DONE
- [x] **Componente de SelecciÃ³n de ExpansiÃ³n** - DONE
- [x] **ConfiguraciÃ³n Inicial del Proyecto React** - DONE
- [x] **Endpoint Backend para Listar Cartas de la ColecciÃ³n del Usuario** - DONE
- [x] **ImplementaciÃ³n del Endpoint para AÃ±adir Carta a la ColecciÃ³n (ValidaciÃ³n API)** - DONE
- [x] **DiseÃ±o de la Base de Datos para la ColecciÃ³n del Usuario** - DONE
- [x] **Endpoint Backend para Listar Cartas de una ExpansiÃ³n** - DONE
- [ ] **Pruebas funcionales de autenticaciÃ³n y registro** - ToDo

---

## âœ… SPRINT 3 - DONE

### GestiÃ³n de ColecciÃ³n y Tests Frontend
- [x] **Endpoint Backend para Actualizar Detalles de Carta en la ColecciÃ³n** - DONE
- [x] **Endpoint Backend para Eliminar Carta de la ColecciÃ³n** - DONE
- [x] **Endpoint para marcar una carta de la colecciÃ³n como favorita** - DONE
- [x] **Interfaz de Usuario para AÃ±adir Carta a la ColecciÃ³n** - DONE
- [x] **Interfaz de Usuario para Visualizar y Gestionar la ColecciÃ³n** - DONE
- [x] **ImplementaciÃ³n de Pruebas de IntegraciÃ³n para Endpoints de ColecciÃ³n** - DONE
- [x] **Filtrar la colecciÃ³n de cartas por expansiÃ³n (solo expansiones presentes en mi colecciÃ³n)** - DONE
- [x] **ConfiguraciÃ³n de Jest/React Testing Library para Pruebas Unitarias Frontend** - DONE
- [ ] **Mostrar la imagen de la carta al seleccionarla al agregar una carta en el formulario y mostrar la imagen de la carta en la lista de cartas del usuario** - DOING

---

## ðŸ“‹ SPRINT 4 - TODO

### Reportes, Despliegue e Infraestructura de Testing
- [ ] **Backend para Reporte: Expansiones con MÃ¡s Cartas** - ToDo
- [ ] **Backend para Reporte: Cartas MÃ¡s Repetidas** - ToDo
- [ ] **Backend para Reporte: Pokemones MÃ¡s Repetidos (por nombre de PokÃ©mon)** - ToDo
- [ ] **PÃ¡gina de Reportes: Expansiones y Cartas Repetidas** - ToDo
- [ ] **ConfiguraciÃ³n de BigQuery para Almacenamiento de Datos de Uso** - ToDo
- [ ] **ConfiguraciÃ³n Inicial de Cuenta AWS y Credenciales** - ToDo
- [ ] **Despliegue BÃ¡sico de la AplicaciÃ³n en AWS (EC2/ECS Fargate - opciÃ³n inicial)** - ToDo
- [ ] **ConfiguraciÃ³n de PostgreSQL en AWS RDS (para entorno de desarrollo)** - ToDo
- [ ] **ConfiguraciÃ³n Inicial de SonarQube para AnÃ¡lisis de CÃ³digo** - ToDo
- [ ] **ConfiguraciÃ³n de GitHub Actions para CI (Pruebas y Linter)** - ToDo
- [ ] **Pruebas funcionales de gestiÃ³n de colecciÃ³n** - ToDo
- [ ] **Pruebas End-to-End con Cypress/Playwright (Componentes Core)** - ToDo

---

## ðŸ“‹ SPRINT 5 - TODO

### Decks Ganadores y BÃºsqueda Avanzada
- [ ] **DiseÃ±o del Modelo de Datos para Decks Ganadores** - ToDo
- [ ] **ImplementaciÃ³n de Servicio de Scraping/API Externa para Decks Ganadores (InvestigaciÃ³n)** - ToDo
- [ ] **Endpoint Backend para Carga Manual/Inicial de Decks Ganadores** - ToDo
- [ ] **Backend para AÃ±adir Atributos Avanzados de Carta (API PokÃ©mon TCG)** - ToDo
- [ ] **Endpoint Backend para BÃºsqueda Avanzada de Cartas en la ColecciÃ³n** - ToDo
- [ ] **Interfaz de Usuario para BÃºsqueda Avanzada en la ColecciÃ³n** - ToDo
- [ ] **ConfiguraciÃ³n de GitHub Actions para CD (Despliegue a Entorno de Desarrollo)** - ToDo
- [ ] **DocumentaciÃ³n de la API Backend con Swagger/OpenAPI** - ToDo

---

## ðŸ“‹ SPRINT 6 - TODO

### Recomendaciones y Monitoreo
- [ ] **ImplementaciÃ³n de la LÃ³gica de RecomendaciÃ³n de Decks (VersiÃ³n 1)** - ToDo
- [ ] **Endpoint Backend para RecomendaciÃ³n de Decks** - ToDo
- [ ] **Interfaz de Usuario para Visualizar Recomendaciones de Decks** - ToDo
- [ ] **ConfiguraciÃ³n de Logging Centralizado (CloudWatch Logs en AWS)** - ToDo
- [ ] **ImplementaciÃ³n de MÃ©tricas BÃ¡sicas (Prometheus/Grafana - Alternativa: CloudWatch Metrics)** - ToDo
- [ ] **Pruebas de Rendimiento BÃ¡sicas (JMeter/Locust - para endpoints clave)** - ToDo
- [ ] **DocumentaciÃ³n de la Arquitectura del Sistema (Diagramas)** - ToDo

---

## ðŸ“‹ SPRINT 7 - TODO

### Infraestructura como CÃ³digo y Seguridad
- [ ] **GestiÃ³n de la Infraestructura en AWS con Terraform (VPC, Subnets, Security Groups)** - ToDo
- [ ] **GestiÃ³n de la Base de Datos PostgreSQL con Terraform (RDS)** - ToDo
- [ ] **Despliegue de AplicaciÃ³n con Terraform (ECR, ECS Fargate/EKS - Avanzado)** - ToDo
- [ ] **ImplementaciÃ³n de Pruebas de Seguridad BÃ¡sicas (OWASP ZAP/Snyk - IntegraciÃ³n CI)** - ToDo
- [ ] **ConfiguraciÃ³n de BigQuery para Almacenamiento de Datos de Uso** - ToDo
- [ ] **EnvÃ­o de Datos de Uso desde el Backend a BigQuery** - ToDo
- [ ] **DocumentaciÃ³n del Proceso de Despliegue con Terraform** - ToDo

---

## ðŸ“‹ SPRINT 8 - TODO

### Analytics, ML y FinalizaciÃ³n
- [ ] **Dashboard de Reportes de Uso en BigQuery/Looker Studio** - ToDo
- [ ] **Backend para Reporte: Valor Estimado de la ColecciÃ³n** - ToDo
- [ ] **Refinamiento de la LÃ³gica de RecomendaciÃ³n de Decks (Machine Learning - Opcional Avanzado)** - ToDo
- [ ] **AutomatizaciÃ³n de la RecolecciÃ³n de Decks Ganadores (Scheduler)** - ToDo
- [ ] **Monitoreo de Errores y Alertas (Sentry/Datadog - free tiers)** - ToDo
- [ ] **Pruebas A/B Testing (Concepto y ConfiguraciÃ³n)** - ToDo
- [ ] **CreaciÃ³n del Informe Final del Proyecto (Estructura y Contenido)** - ToDo
- [ ] **RevisiÃ³n y Mejora Continua de la DocumentaciÃ³n** - ToDo
- [ ] **Sesiones de Retrospectiva y Lecciones Aprendidas (Internas)** - ToDo

---

## ðŸ› BUGS CONOCIDOS

- [x] **Login redirige al formulario tras iniciar sesiÃ³n exitosamente** - RESUELTO

---

## ðŸ”¬ TESTS IMPLEMENTADOS

### Tests de AutenticaciÃ³n (Sprint 2)
- [x] `test_obtain_token_with_valid_credentials`
- [x] `test_obtain_token_with_invalid_credentials`
- [x] `test_access_protected_endpoint_without_token`
- [x] `test_access_protected_endpoint_with_valid_token`
- [x] `test_access_protected_endpoint_with_invalid_token`

### Tests de IntegraciÃ³n Backend (Sprint 3)
- [x] **Tests de Listado de ColecciÃ³n (3 tests)**
- [x] **Tests de AÃ±adir Carta (3 tests)**
- [x] **Tests de ActualizaciÃ³n de Carta (3 tests)**
- [x] **Tests de EliminaciÃ³n de Carta (3 tests)**
- [x] **Tests de Favoritos**
- [x] **Tests de AutorizaciÃ³n y Seguridad (2 tests)**
- [x] **Tests de ValidaciÃ³n de Datos (4 tests)**
- [x] **Tests de IntegraciÃ³n Completa (1 test CRUD workflow)**
- **Total:** 19 tests de integraciÃ³n

### Tests Frontend React (Sprint 3)
- [x] **Tests de ExpansionFilter Component**
- [x] **Tests de CardSelector Component**
- [x] **Tests de AddCardForm Component**
- [x] **Tests de IntegraciÃ³n UserCollection (7 tests)**
- **Total:** 18 tests frontend

### Tests Pendientes
- [ ] **Pruebas funcionales de autenticaciÃ³n y registro** - ToDo
- [ ] **Pruebas funcionales de gestiÃ³n de colecciÃ³n** - ToDo
- [ ] **Pruebas End-to-End con Cypress/Playwright** - ToDo
- [ ] **Pruebas de Rendimiento BÃ¡sicas** - ToDo
- [ ] **Pruebas de Seguridad BÃ¡sicas** - ToDo

---

## ðŸ“ NOTAS TÃ‰CNICAS

### Arquitectura Actual
- **Backend:** Django + DRF + PostgreSQL
- **Frontend:** React + Vite + Axios
- **AutenticaciÃ³n:** JWT con SimpleJWT
- **ContainerizaciÃ³n:** Docker + Docker Compose
- **Testing:** pytest para backend + Jest/RTL para frontend

### TecnologÃ­as Planificadas
- **AWS:** EC2/ECS Fargate, RDS, CloudWatch
- **Analytics:** BigQuery, Looker Studio
- **CI/CD:** GitHub Actions, SonarQube
- **IaC:** Terraform
- **Monitoreo:** Prometheus/Grafana o CloudWatch
- **ML:** Sistema de recomendaciones de decks
- **Seguridad:** OWASP ZAP, Snyk

### Decisiones de DiseÃ±o
- Uso de axios interceptors para manejo global de errores 401
- SeparaciÃ³n clara entre modelos Card (catÃ¡logo) y UserCard (colecciÃ³n personal)
- Enfoque en testing desde etapas tempranas del desarrollo
- Arquitectura preparada para escalabilidad en AWS
- ImplementaciÃ³n gradual de features ML/AI en sprints finales

---

## ðŸ“ˆ PROGRESO POR SPRINT

| Sprint | Completado | Pendiente | Total | % Completado |
|--------|------------|-----------|-------|--------------|
| 1      | 9          | 0         | 9     | 100%         |
| 2      | 15         | 1         | 16    | 94%          |
| 3      | 9          | 0         | 9     | 100%         |
| 4      | 0          | 12        | 12    | 0%           |
| 5      | 0          | 8         | 8     | 0%           |
| 6      | 0          | 7         | 7     | 0%           |
| 7      | 0          | 7         | 7     | 0%           |
| 8      | 0          | 9         | 9     | 0%           |

**Total:** 33 completadas, 44 pendientes (77 historias totales)  
**Progreso General:** 43% completado

---

## ðŸŽ¯ PRÃ“XIMOS PASOS

### Sprint 4 - Listo para Iniciar
1. **Configurar SonarQube** para anÃ¡lisis de cÃ³digo
2. **Configurar GitHub Actions** para CI (Pruebas y Linter)
3. **Implementar reportes bÃ¡sicos** (expansiones, cartas repetidas)
4. **Configurar despliegue en AWS** (cuenta, credenciales, RDS)

### Sprint 5
1. **Implementar Decks Ganadores** (scraping/API externa)
2. **BÃºsqueda avanzada** en colecciÃ³n
3. **DocumentaciÃ³n API** con Swagger

### Comandos de Testing

#### Backend Tests
- **Tests de autenticaciÃ³n:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest pokemon_tcg_ai/auth_api/test_auth.py -v`
- **Tests de integraciÃ³n:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest collection_manager/tests/test_integration.py -v`
- **Todos los tests backend:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest -v`

#### Frontend Tests
- **Todos los tests frontend:** `npm test -- --watchAll=false`
- **Tests especÃ­ficos:** `npm test -- --testNamePattern="T4.1" --watchAll=false`
- **Con coverage:** `npm test -- --watchAll=false --coverage`

### Formato de ticket Jira:

**Filtrar la colecciÃ³n de cartas por expansiÃ³n (solo expansiones presentes en mi colecciÃ³n)**

**Como usuario autenticado, quiero que el selector de expansiÃ³n en mi colecciÃ³n muestre Ãºnicamente las expansiones de las cartas que tengo, para poder filtrar y visualizar fÃ¡cilmente solo las cartas de una expansiÃ³n especÃ­fica o ver todas mis cartas a la vez. AsÃ­, el filtro serÃ¡ mÃ¡s Ãºtil y relevante para mi colecciÃ³n real.**

**Criterios de aceptaciÃ³n (CA):**

**CA1: Endpoint que devuelve solo las expansiones presentes en la colecciÃ³n del usuario**
**CA2: Endpoint que filtra cartas de la colecciÃ³n por expansiÃ³n especÃ­fica**
**CA3: Respuesta incluye informaciÃ³n de expansiÃ³n (nombre, total de cartas del usuario en esa expansiÃ³n)**
**CA4: Dropdown/selector que muestra solo expansiones con cartas en la colecciÃ³n**
**CA5: Al seleccionar una expansiÃ³n, se filtran las cartas mostradas**
**CA6: OpciÃ³n "Todas" para mostrar todas las cartas sin filtro**
**CA7: Indicador visual del nÃºmero de cartas por expansiÃ³n**

**Tests:**

**T1: Tests unitarios para UserExpansionsView (endpoint /api/user-expansions/)**
**T2: Tests de integraciÃ³n para filtrado de cartas por expansiÃ³n**
**T3: Tests unitarios para el componente ExpansionFilter (React)**
**T4: Tests de integraciÃ³n para verificar que el filtrado funciona end-to-end**
**T5: Cobertura de tests > 80% para nuevos componentes**
**T6: Verificar que tests existentes siguen pasando**