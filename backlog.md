# Product Backlog - Pok√©mon TCG AI Generator

## üìä RESUMEN DEL PROYECTO

**Total de Sprints:** 8  
**Historias Completadas:** 33  
**Historias en Progreso:** 1  
**Historias Pendientes:** 43  

---

## ‚úÖ SPRINT 1 - DONE

### Configuraci√≥n Base y APIs Externas
- [x] **Configuraci√≥n de Django Users y Django REST Framework para Autenticaci√≥n** - DONE
- [x] **Configuraci√≥n Inicial de Confluence (o alternativa gratuita)** - DONE
- [x] **Implementaci√≥n del Servicio de Consulta a la API de Pok√©mon TCG (Cartas por Expansi√≥n)** - DONE
- [x] **Endpoint Backend para Listar Expansiones** - DONE
- [x] **Implementaci√≥n del Servicio de Consulta a la API de Pok√©mon TCG (Expansiones)** - DONE
- [x] **Dise√±o de la Base de Datos para Carta y Expansi√≥n** - DONE
- [x] **Configuraci√≥n de Docker para el Backend Django** - DONE
- [x] **Inicializaci√≥n del Repositorio Git y Conexi√≥n con GitHub** - DONE
- [x] **Configuraci√≥n Inicial del Entorno de Desarrollo Python/Django** - DONE

---

## ‚úÖ SPRINT 2 - DONE ‚úÖ

### Autenticaci√≥n y Frontend Base
- [x] **Acceso a Datos Protegidos de la Colecci√≥n (Expansiones y Cartas)** - DONE
- [x] **Proteger Endpoints que Requieren Autenticaci√≥n** - DONE
- [x] **Endpoint Backend para Obtener Detalles de una Carta Espec√≠fica (por API ID)** - DONE
- [x] **Interfaz de Usuario (Frontend) para Login de Usuarios y Gesti√≥n de Tokens** - DONE
- [x] **Interfaz de Usuario (Frontend) para Registro de Usuarios** - DONE
- [x] **Endpoint Backend para Login de Usuarios y Obtenci√≥n de Tokens** - DONE
- [x] **Endpoint Backend para Registro de Usuarios** - DONE
- [x] **Configuraci√≥n de Pruebas Unitarias para el Backend (pytest)** - DONE
- [x] **Componente de Selecci√≥n de Carta por Expansi√≥n** - DONE
- [x] **Componente de Selecci√≥n de Expansi√≥n** - DONE
- [x] **Configuraci√≥n Inicial del Proyecto React** - DONE
- [x] **Endpoint Backend para Listar Cartas de la Colecci√≥n del Usuario** - DONE
- [x] **Implementaci√≥n del Endpoint para A√±adir Carta a la Colecci√≥n (Validaci√≥n API)** - DONE
- [x] **Dise√±o de la Base de Datos para la Colecci√≥n del Usuario** - DONE
- [x] **Endpoint Backend para Listar Cartas de una Expansi√≥n** - DONE

---

## ‚úÖ SPRINT 3 - DONE ‚úÖ

### Gesti√≥n de Colecci√≥n, Tests Frontend y Vista Agrupada
- [x] **Endpoint Backend para Actualizar Detalles de Carta en la Colecci√≥n** - DONE
- [x] **Endpoint Backend para Eliminar Carta de la Colecci√≥n** - DONE
- [x] **Endpoint para marcar una carta de la colecci√≥n como favorita** - DONE
- [x] **Interfaz de Usuario para A√±adir Carta a la Colecci√≥n** - DONE
- [x] **Interfaz de Usuario para Visualizar y Gestionar la Colecci√≥n** - DONE
- [x] **Implementaci√≥n de Pruebas de Integraci√≥n para Endpoints de Colecci√≥n** - DONE
- [x] **Filtrar la colecci√≥n de cartas por expansi√≥n (solo expansiones presentes en mi colecci√≥n)** - DONE ‚úÖ
- [x] **Configuraci√≥n de Jest/React Testing Library para Pruebas Unitarias Frontend** - DONE ‚úÖ
- [x] **Vista Agrupada de Cartas en la Colecci√≥n del Usuario (Nuevo Feature)** - DONE ‚úÖ
- [x] **Mostrar la imagen de la carta al seleccionarla al agregar una carta en el formulario y mostrar la imagen de la carta en la lista de cartas del usuario** - DONE ‚úÖ

---

## üöÄ SPRINT 4 - IN PROGRESS

### Tests Frontend, Reportes, Despliegue e Infraestructura
- [ ] **Pruebas funcionales de autenticaci√≥n y registro** - ToDo üéØ
- [ ] **Backend para Reporte: Expansiones con M√°s Cartas** - ToDo
- [ ] **Backend para Reporte: Cartas M√°s Repetidas** - ToDo
- [ ] **Backend para Reporte: Pokemones M√°s Repetidos (por nombre de Pok√©mon)** - ToDo
- [ ] **P√°gina de Reportes: Expansiones y Cartas Repetidas** - ToDo
- [ ] **Configuraci√≥n de BigQuery para Almacenamiento de Datos de Uso** - ToDo
- [ ] **Configuraci√≥n Inicial de Cuenta AWS y Credenciales** - ToDo
- [ ] **Despliegue B√°sico de la Aplicaci√≥n en AWS (EC2/ECS Fargate - opci√≥n inicial)** - ToDo
- [ ] **Configuraci√≥n de PostgreSQL en AWS RDS (para entorno de desarrollo)** - ToDo
- [ ] **Configuraci√≥n Inicial de SonarQube para An√°lisis de C√≥digo** - ToDo
- [ ] **Configuraci√≥n de GitHub Actions para CI (Pruebas y Linter)** - ToDo
- [ ] **Pruebas funcionales de gesti√≥n de colecci√≥n** - ToDo
- [ ] **Pruebas End-to-End con Cypress/Playwright (Componentes Core)** - ToDo

---

## üìã SPRINT 5 - TODO

### Decks Ganadores y B√∫squeda Avanzada
- [ ] **Dise√±o del Modelo de Datos para Decks Ganadores** - ToDo
- [ ] **Implementaci√≥n de Servicio de Scraping/API Externa para Decks Ganadores (Investigaci√≥n)** - ToDo
- [ ] **Endpoint Backend para Carga Manual/Inicial de Decks Ganadores** - ToDo
- [ ] **Backend para A√±adir Atributos Avanzados de Carta (API Pok√©mon TCG)** - ToDo
- [ ] **Endpoint Backend para B√∫squeda Avanzada de Cartas en la Colecci√≥n** - ToDo
- [ ] **Interfaz de Usuario para B√∫squeda Avanzada en la Colecci√≥n** - ToDo
- [ ] **Configuraci√≥n de GitHub Actions para CD (Despliegue a Entorno de Desarrollo)** - ToDo
- [ ] **Documentaci√≥n de la API Backend con Swagger/OpenAPI** - ToDo

---

## üìã SPRINT 6 - TODO

### Recomendaciones y Monitoreo
- [ ] **Implementaci√≥n de la L√≥gica de Recomendaci√≥n de Decks (Versi√≥n 1)** - ToDo
- [ ] **Endpoint Backend para Recomendaci√≥n de Decks** - ToDo
- [ ] **Interfaz de Usuario para Visualizar Recomendaciones de Decks** - ToDo
- [ ] **Configuraci√≥n de Logging Centralizado (CloudWatch Logs en AWS)** - ToDo
- [ ] **Implementaci√≥n de M√©tricas B√°sicas (Prometheus/Grafana - Alternativa: CloudWatch Metrics)** - ToDo
- [ ] **Pruebas de Rendimiento B√°sicas (JMeter/Locust - para endpoints clave)** - ToDo
- [ ] **Documentaci√≥n de la Arquitectura del Sistema (Diagramas)** - ToDo

---

## üìã SPRINT 7 - TODO

### Infraestructura como C√≥digo y Seguridad
- [ ] **Gesti√≥n de la Infraestructura en AWS con Terraform (VPC, Subnets, Security Groups)** - ToDo
- [ ] **Gesti√≥n de la Base de Datos PostgreSQL con Terraform (RDS)** - ToDo
- [ ] **Despliegue de Aplicaci√≥n con Terraform (ECR, ECS Fargate/EKS - Avanzado)** - ToDo
- [ ] **Implementaci√≥n de Pruebas de Seguridad B√°sicas (OWASP ZAP/Snyk - Integraci√≥n CI)** - ToDo
- [ ] **Configuraci√≥n de BigQuery para Almacenamiento de Datos de Uso** - ToDo
- [ ] **Env√≠o de Datos de Uso desde el Backend a BigQuery** - ToDo
- [ ] **Documentaci√≥n del Proceso de Despliegue con Terraform** - ToDo

---

## üìã SPRINT 8 - TODO

### Analytics, ML y Finalizaci√≥n
- [ ] **Dashboard de Reportes de Uso en BigQuery/Looker Studio** - ToDo
- [ ] **Backend para Reporte: Valor Estimado de la Colecci√≥n** - ToDo
- [ ] **Refinamiento de la L√≥gica de Recomendaci√≥n de Decks (Machine Learning - Opcional Avanzado)** - ToDo
- [ ] **Automatizaci√≥n de la Recolecci√≥n de Decks Ganadores (Scheduler)** - ToDo
- [ ] **Monitoreo de Errores y Alertas (Sentry/Datadog - free tiers)** - ToDo
- [ ] **Pruebas A/B Testing (Concepto y Configuraci√≥n)** - ToDo
- [ ] **Creaci√≥n del Informe Final del Proyecto (Estructura y Contenido)** - ToDo
- [ ] **Revisi√≥n y Mejora Continua de la Documentaci√≥n** - ToDo
- [ ] **Sesiones de Retrospectiva y Lecciones Aprendidas (Internas)** - ToDo

---

## üêõ BUGS CONOCIDOS

- [x] **Login redirige al formulario tras iniciar sesi√≥n exitosamente** - RESUELTO

---

## üî¨ TESTS IMPLEMENTADOS

### Tests de Autenticaci√≥n (Sprint 2)
- [x] `test_obtain_token_with_valid_credentials`
- [x] `test_obtain_token_with_invalid_credentials`
- [x] `test_access_protected_endpoint_without_token`
- [x] `test_access_protected_endpoint_with_valid_token`
- [x] `test_access_protected_endpoint_with_invalid_token`

### Tests de Integraci√≥n Backend (Sprint 3)
- [x] **Tests de Listado de Colecci√≥n (3 tests)**
- [x] **Tests de A√±adir Carta (3 tests)**
- [x] **Tests de Actualizaci√≥n de Carta (3 tests)**
- [x] **Tests de Eliminaci√≥n de Carta (3 tests)**
- [x] **Tests de Favoritos**
- [x] **Tests de Autorizaci√≥n y Seguridad (2 tests)**
- [x] **Tests de Validaci√≥n de Datos (4 tests)**
- [x] **Tests de Integraci√≥n Completa (1 test CRUD workflow)**
- [x] **Tests de Vista Agrupada de Cartas (8 tests)** ‚úÖ NUEVO
- **Total:** 27 tests de integraci√≥n backend

### Tests Frontend React (Sprint 3)
- [x] **Tests de ExpansionFilter Component**
- [x] **Tests de CardSelector Component**
- [x] **Tests de AddCardForm Component**
- [x] **Tests de Integraci√≥n UserCollection (8 tests)**
- [x] **Tests de CardDetailsModal Component (8 tests)** ‚úÖ NUEVO
- **Total:** 26 tests frontend

### Tests Pendientes
- [ ] **Pruebas funcionales de autenticaci√≥n y registro** - ToDo (Sprint 4) üéØ
- [ ] **Pruebas funcionales de gesti√≥n de colecci√≥n** - ToDo
- [ ] **Pruebas End-to-End con Cypress/Playwright** - ToDo
- [ ] **Pruebas de Rendimiento B√°sicas** - ToDo
- [ ] **Pruebas de Seguridad B√°sicas** - ToDo

---

## üìù NOTAS T√âCNICAS

### Arquitectura Actual
- **Backend:** Django + DRF + PostgreSQL
- **Frontend:** React + Vite + Axios
- **Autenticaci√≥n:** JWT con SimpleJWT
- **Containerizaci√≥n:** Docker + Docker Compose
- **Testing:** pytest para backend + Jest/RTL para frontend

### Nuevas Features Implementadas ‚úÖ
- **Vista Agrupada de Cartas:** Endpoint `/api/user-cards/grouped/` que agrupa cartas por tipo y expansi√≥n
- **Modal de Detalles:** Componente `CardDetailsModal` para gestionar instancias individuales
- **Gesti√≥n Avanzada:** Eliminaci√≥n y favoritos a nivel de instancia individual
- **Im√°genes de Cartas:** Visualizaci√≥n de im√°genes tanto en formulario como en colecci√≥n
- **Filtrado por Expansi√≥n:** Solo expansiones presentes en la colecci√≥n del usuario

### Tecnolog√≠as Planificadas
- **AWS:** EC2/ECS Fargate, RDS, CloudWatch
- **Analytics:** BigQuery, Looker Studio
- **CI/CD:** GitHub Actions, SonarQube
- **IaC:** Terraform
- **Monitoreo:** Prometheus/Grafana o CloudWatch
- **ML:** Sistema de recomendaciones de decks
- **Seguridad:** OWASP ZAP, Snyk

### Decisiones de Dise√±o
- Uso de axios interceptors para manejo global de errores 401
- Separaci√≥n clara entre modelos Card (cat√°logo) y UserCard (colecci√≥n personal)
- Enfoque en testing desde etapas tempranas del desarrollo
- Arquitectura preparada para escalabilidad en AWS
- Implementaci√≥n gradual de features ML/AI en sprints finales
- **Vista agrupada para mejor UX:** Cartas duplicadas se muestran como grupos con detalles expandibles

---

## üìà PROGRESO POR SPRINT

| Sprint | Completado | Pendiente | Total | % Completado |
|--------|------------|-----------|-------|--------------|
| 1      | 9          | 0         | 9     | 100%         |
| 2      | 15         | 0         | 15    | 100%         |
| 3      | 10         | 0         | 10    | 100%         |
| 4      | 0          | 13        | 13    | 0%           |
| 5      | 0          | 8         | 8     | 0%           |
| 6      | 0          | 7         | 7     | 0%           |
| 7      | 0          | 7         | 7     | 0%           |
| 8      | 0          | 9         | 9     | 0%           |

**Total:** 34 completadas, 44 pendientes (78 historias totales)  
**Progreso General:** 44% completado

---

## üéØ PR√ìXIMA HISTORIA - SPRINT 4

### üß™ **Historia Actual: Pruebas funcionales de autenticaci√≥n y registro**

**Como desarrollador, quiero tener tests funcionales completos para los componentes de autenticaci√≥n (Login y Register), para asegurar que el flujo de autenticaci√≥n funciona correctamente y mantener la calidad del c√≥digo.**

**Criterios de Aceptaci√≥n:**
- **CA1:** Tests funcionales para componente Login.jsx (renderizado, validaci√≥n, env√≠o exitoso, manejo de errores)
- **CA2:** Tests funcionales para componente Register.jsx (renderizado, validaci√≥n, env√≠o exitoso, manejo de errores)
- **CA3:** Tests de integraci√≥n para flujo completo de autenticaci√≥n (registro ‚Üí login ‚Üí acceso a colecci√≥n)
- **CA4:** Mocking apropiado de axios y localStorage
- **CA5:** Cobertura de tests > 90% para componentes de autenticaci√≥n
- **CA6:** Tests deben simular interacciones reales del usuario
- **CA7:** Verificar redirecciones y manejo de estados de loading

### Comandos de Testing

#### Comandos Backend Tests 
- **Tests de autenticaci√≥n:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest pokemon_tcg_ai/auth_api/test_auth.py -v`
- **Tests de integraci√≥n:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest collection_manager/tests/test_integration.py -v`
- **Tests agrupados:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest collection_manager/tests/test_user_cards_grouped.py -v`
- **Todos los tests backend:** `docker exec -it pokemon-tcg-ai-generator-web-1 pytest -v`

#### Comandos Frontend Tests
- **Todos los tests frontend:** `npm test -- --watchAll=false`
- **Tests espec√≠ficos de Login:** `npm test -- --testNamePattern="Login" --watchAll=false`
- **Tests espec√≠ficos de Register:** `npm test -- --testNamePattern="Register" --watchAll=false`
- **Con coverage:** `npm test -- --watchAll=false --coverage`